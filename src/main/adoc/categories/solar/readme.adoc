= Solar & Energy
:hardbreaks:

This chapter contains notes on solar, mostly used to study sun power.

== APIs

* EcoWatt
** link:https://data.rte-france.com/catalog/-/api/consumption/Ecowatt/v4.0#[EcoWatt] provides info about France usage now and upcoming
** link:https://forum.hacf.fr/t/api-ecowatt/15451/65[Sample code js]
** link:https://github.com/kamaradclimber/rte-ecowatt[EcoWatt project]

== Example

Computing example.

* Look at solar map showing your kWh/kWc per year
** e.g. 1000-1100 kWh/kWc
* Solar panel gives 370 Wc and you have 12 which makes 370 x 12 = 4440 Wc
* With ratio, you can produce between 4440 kWh and 4884 kWh

== Links

.France specifics
* link:https://particulier.edf.fr/fr/accueil/gestion-contrat/options/tempo.html#/selection-bp[Tempo days]

.Producing Electricity
* link:https://re.jrc.ec.europa.eu/pvg_tools/fr/tools.html[PHOTOVOLTAIC GEOGRAPHICAL INFORMATION SYSTEM]
* link:https://conseils-thermiques.org/contenu/outil-calcul-production-solaire.php[Tools]


.Examples
* link:https://www.youtube.com/watch?v=-IyKLz1RsMg[Installation sauvage]

.Fun Projects
* link:https://www.instructables.com/Happy-Birds-a-World-of-Connected-Bird-Feeders-Conn[Bird Cam]

.Kit
* link:https://kitsolaire-discount.com/fr/12-kits-autonomes-sites-isoles[Kits]

.Wiring
* link:https://www.youtube.com/watch?v=tZ-uQKEWe6M[Solar and Water heating optimization]

.Mathematics
* link:https://pvlib-python.readthedocs.io/en/v0.10.2/index.html[Library to compute solar efficiency]

.Monitoring PV
* OpenDTU
** link:https://github.com/tbnobody/OpenDTU[OpenDTU GitHub Project]
** link:https://tbnobody.github.io/OpenDTU-docs/[OpenDTU official docs]
** link:https://www.youtube.com/watch?v=ctBlQoErfX8[OpenDTU explanations video]
** link:https://docs.google.com/document/d/e/2PACX-1vRaGy2E91kmr014nAi-rfvNxdpZqR6lFIXln1kMKg_T6_YWh72ZNLnwXHxUjQQexczNPZR3GftG7w-r/pub[OpenDTU gist]
** link:https://binary-kitchen.github.io/SolderingTutorial/OpenDTU_Breakout/manual/OpenDTU_Breakout_en.pdf[OpenDTU PDF instructions]
** link:https://theo-beaudenon.fr/tutoriel-dinstallation-de-opendtu-pour-le-suivi-des-onduleurs-solaires/[OpenDTU Flash instructions]
** link:https://github.com/tbnobody/OpenDTU/blob/master/docs/MQTT_Topics.md[OpenDTU MQTT topics]
** link:https://tbnobody.github.io/OpenDTU-docs/firmware/web_api/#list-of-urls[OpenDTU API]
* OpenDTU triggered modules
** link:https://tbnobody.github.io/OpenDTU-docs/3rd_party/related/[3rd party projects]
** link:https://github.com/helgeerbe/OpenDTU-OnBattery/wiki[Project On Battery]
** link:https://github.com/tomquist/HoymilesZeroExport[Hoymiles Zero Export]
** link:https://github.com/reserve85/HoymilesZeroExport[Hoymiles Zero Export]

.Routeur PV
* link:https://ard-tek.com/index.php/documents/22-m-sunpv/47-msun-pv-md-routeur-photovoltaique-2[Routeur PV]

.Batteries
* link:https://www.revolution-energetique.com/guides/installer-une-batterie-domestique-chez-soi-est-ce-rentable/[Storage - mathemetics]

[source,txt]
----
# Kit for 8kWh 
# - Costs 3000€
# - DoD = 80%
# - Cycles = 3000
# Electicity costs ~0.20€ / kWh

- 3000 cycles x 8 kWh x 0.8 DoD = 19200 kWh
- 3000 € / 19200 = 0.1563 €/kWh
----

== Orchestrate Solar

* link:https://flows.nodered.org/search?term=victron[Node-Red - Victron Energy flows]


== Use solar

=== Water Heating

* link:https://docplayer.fr/75284929-Viesmann-notice-de-montage-et-de-maintenance-vitocal-060-a.html[Doc - Viessmann Vitocal - p51-56]
* ref link:https://forum-photovoltaique.fr/viewtopic.php?t=60716&sid=6022a5b5fa2a769c788d15a860f79858&start=20[Forum - Solar trigger - Vitocal]

[source,txt]
----
- l'option PV du vitocal s'active par simple contact des 2 pins de droite de la nappe prévue pour le PV (le branchement 4 pins sur le dessus du boitier)
- ce n'est pas la résistance mais uniquement la PAC qui s'active, et sa consommation dépendra de la chaleur déjà accumulée dans le ballon : de 400wtt pour un ballon froid, jusqu'à 600Wtt pour une eau déjà à plus de 55°c.
- il faut d'abord activer l'option PV dans la config, la mettre sur x minutes. X représente le temps avant lequel le ballon se mettra en route une fois le contact effectué. Par exemple, si vous configurez à 5, le ballon s'activera après 5 minutes de contact ininterrompu.
- si le ballon était en fonctionnement et qu'au moment d’arriver à sa température de consigne le contact est déjà fermé, il ne s’arrête pas et continuera tant que le contact reste fermé. Sinon il faudra attendre les x minutes paramétrées avant le démarrage.
- une fois le contact fermé, le ballon est lancé en mode PV, et chauffe tant que le contact est maintenu. Dès que le contact est coupé, le ballon s'arrête immédiatement.
- dans tous les cas, le ballon s’arrêtera à la température maximum.
----